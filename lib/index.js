!function(t){var i={};function e(a){if(i[a])return i[a].exports;var r=i[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=i,e.d=function(t,i,a){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(i,e,a){return e&&t(i.prototype,e),a&&t(i,a),i}}();var r=function(){function t(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.tileWidth,r=void 0===a?20:a,l=e.tileHeight,n=void 0===l?20:l,o=e.brushSize,h=void 0===o?3:o;!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t);var s=i.canvas;this.context=i,this.brushSize=h,this.width=s.width,this.height=s.height,this.tileWidth=r,this.tileHeight=n;var u=this.width,c=this.height;this.imageData=i.getImageData(0,0,u,c).data,this.tileRowSize=Math.ceil(c/this.tileHeight),this.tileColumnSize=Math.ceil(u/this.tileWidth),this.tiles=[];for(var f=0;f<this.tileRowSize;f++)for(var d=0;d<this.tileColumnSize;d++){var v={row:f,column:d,pixelWidth:r,pixelHeight:n};d===this.column-1&&(v.pixelWidth=u-d*r),f===this.row-1&&(v.pixelHeight=c-f*n);for(var p=[],g=4*this.width*this.tileHeight*v.row+v.column*this.tileWidth*4,x=0,m=v.pixelHeight;x<m;x++){var w=g+4*this.width*x;p.push.apply(p,this.imageData.slice(w,w+4*v.pixelWidth))}v.data=p,this.tiles.push(v)}}return a(t,[{key:"drawTile",value:function(t){var i=this;(t=[].concat(t)).forEach(function(t){if(t.isFilled)return!1;if(!t.color){for(var e=t.data.length,a=0,r=0,l=0,n=0,o=0;o<e;o+=4)a+=t.data[o],r+=t.data[o+1],l+=t.data[o+2],n+=t.data[o+3];var h=e/4;t.color={r:parseInt(a/h,10),g:parseInt(r/h,10),b:parseInt(l/h,10),a:parseInt(n/h,10)}}var s=t.color;i.context.fillStyle="rgba("+s.r+", "+s.g+", "+s.b+", "+s.a/255+")";var u=t.column*i.tileWidth,c=t.row*i.tileHeight,f=t.pixelWidth,d=t.pixelHeight;i.context.clearRect(u,c,f,d),i.context.fillRect(u,c,f,d),t.isFilled=!0})}},{key:"drawTileByPoint",value:function(t,i){var e=this.getTilesByPoint(t,i);this.drawTile(e)}},{key:"eraseTileByPoint",value:function(t,i){var e=this.getTilesByPoint(t,i);this.eraseTile(e)}},{key:"getTilesByPoint",value:function(t,i){var e=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])for(var a=this.brushSize,r=Math.max(0,Math.floor(i/this.tileHeight)-Math.floor(a/2)),l=Math.max(0,Math.floor(t/this.tileWidth)-Math.floor(a/2)),n=Math.min(this.tileRowSize,r+a),o=Math.min(this.tileColumnSize,l+a);r<n;){for(var h=l;h<o;)e.push(this.tiles[r*this.tileColumnSize+h]),h+=1;r+=1}return e}},{key:"drawAllTiles",value:function(){this.drawTile(this.tiles)}},{key:"eraseTile",value:function(t){var i=this;[].concat(t).forEach(function(t){var e=t.column*i.tileWidth,a=t.row*i.tileHeight,r=t.pixelWidth,l=t.pixelHeight,n=i.context.createImageData(r,l);t.data.forEach(function(t,i){n.data[i]=t}),i.context.clearRect(e,a,r,l),i.context.putImageData(n,e,a),t.isFilled=!1})}},{key:"eraseAllTiles",value:function(t){this.eraseTile(this.tiles)}}]),t}();i.default=r}]);